# ============================================
# CONFIGURACIÓN PARA PRODUCCIÓN
# ============================================
# Este archivo contiene las configuraciones recomendadas para producción.
# Copia este archivo como .env.production y ajusta los valores según tu entorno.

# --- Configuración de la Aplicación ---
PORT=3000
NODE_ENV=production
API_PREFIX=api

# --- URLs del Frontend ---
FRONTEND_URL=https://eventos.ciploreto.org.pe
FRONTEND_LOGIN_PATH_ES=/iniciar-sesion
FRONTEND_LOGIN_PATH_EN=/en/login
FRONTEND_CONFIRM_PATH_ES=/auth/confirm
FRONTEND_CONFIRM_PATH_EN=/en/auth/confirm
FRONTEND_RESET_PATH_ES=/auth/restablecer-contrasena
FRONTEND_RESET_PATH_EN=/en/auth/reset-password

# --- Configuración de Base de Datos (PostgreSQL) ---
DB_HOST=your-production-db-host.com
DB_PORT=5432
DB_USERNAME=cip_eventos_prod_user
DB_PASSWORD=CAMBIAR_POR_PASSWORD_SEGURO
DB_NAME=cip_eventos_prod_db

# IMPORTANTE: En producción SIEMPRE usar false
# Las migraciones se gestionan con: npm run migration:run
DB_SYNC=false

# --- Seguridad (JWT) ---
# GENERAR CLAVES SEGURAS ÚNICAS PARA PRODUCCIÓN
# Linux/Mac: openssl rand -base64 32
# PowerShell: [Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))
JWT_SECRET=CAMBIAR_POR_CLAVE_SEGURA_UNICA
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=CAMBIAR_POR_OTRA_CLAVE_SEGURA_UNICA
JWT_REFRESH_EXPIRES_IN=7d

# --- Configuración de Email ---
# Opción 1: SMTP (Gmail, Office365, etc)
MAIL_PROVIDER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USER=noreply@ciploreto.org.pe
MAIL_PASS=CAMBIAR_POR_APP_PASSWORD
MAIL_FROM="Soporte CIP Loreto <noreply@ciploreto.org.pe>"

# Opción 2: Resend (recomendado para producción)
# MAIL_PROVIDER=resend
# RESEND_API_KEY=re_CAMBIAR_POR_TU_API_KEY
# MAIL_FROM="Soporte CIP <noreply@ciploreto.org.pe>"

# --- MinIO / S3 (Almacenamiento de archivos) ---
# Usar servicio en la nube (AWS S3, DigitalOcean Spaces, etc)
MINIO_ACCESS_KEY=CAMBIAR_POR_ACCESS_KEY
MINIO_SECRET_KEY=CAMBIAR_POR_SECRET_KEY
MINIO_ENDPOINT=https://s3.tu-region.amazonaws.com
MINIO_BUCKET=cip-eventos-avatars
MINIO_REGION=us-east-1

# --- PayPal (Pagos) ---
# IMPORTANTE: Cambiar a API LIVE en producción
PAYPAL_API_URL=https://api-m.paypal.com
PAYPAL_CLIENT_ID=CAMBIAR_POR_CLIENT_ID_LIVE
PAYPAL_CLIENT_SECRET=CAMBIAR_POR_SECRET_LIVE

# --- Google Wallet ---
GOOGLE_WALLET_ISSUER_ID=CAMBIAR_POR_ISSUER_ID
GOOGLE_APPLICATION_CREDENTIALS=./google-key-production.json
GOOGLE_WALLET_ISSUER_NAME=Colegio de Ingenieros del Perú
GOOGLE_WALLET_DEFAULT_LOGO=https://storage.googleapis.com/cip-eventos/logo-cip.png

# --- Redis (Caché y Rate Limiting) ---
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=CAMBIAR_POR_PASSWORD_SEGURO
REDIS_DB=0

# --- Cron Jobs ---
# Habilitar cron jobs en producción
CIP_CRON_ENABLED=true
EVENTS_CRON_ENABLED=true

# --- Cookies (Seguridad) ---
# IMPORTANTE: Usar el dominio correcto en producción
COOKIE_DOMAIN=ciploreto.org.pe
COOKIE_SAMESITE=strict

# ============================================
# CHECKLIST DE SEGURIDAD PARA PRODUCCIÓN
# ============================================
# [ ] DB_SYNC=false (usar migraciones)
# [ ] Claves JWT únicas y seguras (32+ caracteres)
# [ ] Passwords de DB y Redis seguros
# [ ] HTTPS habilitado en FRONTEND_URL
# [ ] PayPal en modo LIVE (no sandbox)
# [ ] Credenciales de email de producción
# [ ] Credenciales de S3/MinIO de producción
# [ ] Google Wallet con credenciales de producción
# [ ] COOKIE_SAMESITE=strict (no 'none')
# [ ] Backups de base de datos configurados
# [ ] Monitoreo y logs configurados
