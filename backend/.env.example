# --- Configuración de la Aplicación ---
PORT=3000
# Entorno: development | production | test
NODE_ENV=development
# Prefijo global de la API
API_PREFIX=api
# URL del frontend (para CORS y cookies)
FRONTEND_URL=http://localhost:4321
# Ruta de login (para enlaces en emails de confirmación)
FRONTEND_LOGIN_PATH_ES=/iniciar-sesion
FRONTEND_LOGIN_PATH_EN=/en/login
# Rutas de confirmación por idioma
FRONTEND_CONFIRM_PATH_ES=/auth/confirm
FRONTEND_CONFIRM_PATH_EN=/en/auth/confirm
# Rutas de reset por idioma
FRONTEND_RESET_PATH_ES=/auth/restablecer-contrasena
FRONTEND_RESET_PATH_EN=/en/auth/reset-password

# --- Configuración de Base de Datos (PostgreSQL) ---
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=password123
DB_NAME=backend_db
# DB_SYNC: ¡Cuidado! Usar 'true' solo en desarrollo (crea tablas automáticamente)
# En producción usar 'false' y gestionar cambios con migraciones (npm run migration:*)
DB_SYNC=true

# --- Seguridad (JWT) ---
# Generar clave segura. En linux puedes usar: openssl rand -base64 32
JWT_SECRET=esta_es_una_clave_secreta_temporal
JWT_EXPIRES_IN=24h
# Clave secreta para refresh tokens
JWT_REFRESH_SECRET=esta_es_otra_clave_secreta_temporal
JWT_REFRESH_EXPIRES_IN=7d

# --- Configuración de Email (Development) ---
MAIL_HOST=smtp.ethereal.email
MAIL_PORT=587
MAIL_USER=tu_usuario_generado@ethereal.email
MAIL_PASS=tu_password_generado
MAIL_FROM="Soporte CIP <noreply@cip-eventos.com>"
# Provider de correo: smtp | resend
MAIL_PROVIDER=smtp
# API key de Resend (obligatoria si MAIL_PROVIDER=resend)
RESEND_API_KEY=tu_api_key_de_resend

MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=supersecret
MINIO_ENDPOINT=http://localhost:9000
MINIO_BUCKET=avatars
MINIO_REGION=us-east-1

# --- PAYPAL CONFIG ---
# Sandbox: https://api-m.sandbox.paypal.com
# Live: https://api-m.paypal.com
PAYPAL_API_URL=https://api-m.sandbox.paypal.com
PAYPAL_CLIENT_ID=tu_client_id_sandbox
PAYPAL_CLIENT_SECRET=tu_secret_sandbox

# --- Google Wallet ---
# ID del emisor proporcionado por Google Wallet (numérico)
GOOGLE_WALLET_ISSUER_ID=tu_issuer_id_numerico
# Ruta al archivo de credenciales del Service Account de Google
GOOGLE_APPLICATION_CREDENTIALS=./google-key.json
# Nombre del emisor que aparecerá en el pase (opcional)
GOOGLE_WALLET_ISSUER_NAME=Colegio de Ingenieros del Perú
# URL del logo por defecto para eventos sin imagen (opcional)
GOOGLE_WALLET_DEFAULT_LOGO=https://storage.googleapis.com/cip-eventos/logo-cip-default.png

# --- Redis ---
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# --- CIP Integration Cron Jobs ---
# Habilitar cron jobs de CIP (true para forzar en desarrollo, por defecto solo en producción)
CIP_CRON_ENABLED=false

# --- RENIEC Validation (Optional) ---
# API URL del proveedor de RENIEC (APIs Perú, Nubefact, etc.)
RENIEC_API_URL=https://api.apis.net.pe/v2
# Token de autenticación para la API de RENIEC
RENIEC_API_TOKEN=
# Habilitar validación RENIEC (true/false)
RENIEC_VALIDATION_ENABLED=false
# Puntuación mínima de coincidencia para considerar válidos los datos (0-100)
RENIEC_MIN_MATCH_SCORE=80
# Habilitar caché de consultas RENIEC
RENIEC_CACHE_ENABLED=true
# Tiempo de vida del caché en milisegundos (por defecto 24 horas = 86400000)
RENIEC_CACHE_TTL=86400000

# --- Rate Limiting Configuration ---
# Máximo de pedidos pendientes (PENDING) por Persona
MAX_PENDING_ORDERS_PER_PERSON=3
# Máximo de pedidos pendientes (PENDING) por IP
MAX_PENDING_ORDERS_PER_IP=5
# Throttle TTL en milisegundos (tiempo de ventana para rate limiting)
THROTTLE_TTL=60000
# Throttle Limit (número de peticiones permitidas en el TTL)
THROTTLE_LIMIT=10

# --- Streaming Token Security ---
# Minutos antes del inicio de la sesión en que el token es válido
STREAMING_TOKEN_WINDOW_BEFORE_MINUTES=15
# Minutos después del fin de la sesión en que el token es válido
STREAMING_TOKEN_WINDOW_AFTER_MINUTES=30
# Número máximo de conexiones simultáneas permitidas por token
STREAMING_MAX_CONCURRENT_CONNECTIONS=2
