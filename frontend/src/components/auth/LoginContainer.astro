---
import { LoginForm } from './LoginForm'
import LoginHero from './LoginHero.astro'
import { AUTH_ASSETS } from "@/constants/auth"
import esTranslations from '@/i18n/locales/es.json'
import enTranslations from '@/i18n/locales/en.json'

interface Props {
  lang?: 'es' | 'en'
}

const { lang = 'es' } = Astro.props

// Select the appropriate translations based on locale
const translations = lang === 'en' ? enTranslations : esTranslations

const brandCouncil = translations.login.brand.council
const brandRegion = translations.login.brand.region
---

<div class="login-container">
  <!-- Panel izquierdo - Formulario -->
  <div class="login-panel">
    <div class="login-content">
      <div class="login-brand">
        <img src={AUTH_ASSETS.logo} alt="Logo CIP" class="brand-logo" />
        <span class="brand-text">{brandCouncil}<br/>{brandRegion}</span>
      </div>
      <LoginForm client:only="react" />
    </div>
  </div>

  <!-- Panel derecho - Hero (imagen) -->
  <div class="hero-panel">
    <LoginHero />
  </div>
</div>

<style>
  .login-container {
    display: flex;
    min-height: 100vh;
    width: 100%;
  }

  .login-panel {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42%;
    padding: var(--space-16);
    background-color: var(--color-bg-form);
  }

  .login-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-10);
    width: 100%;
    max-width: 360px;
  }

  .login-brand {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.75rem;
  }

  .brand-logo {
    width: 48px;
    height: 48px;
    object-fit: contain;
  }

  .brand-text {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-grey-700);
    line-height: 1.3;
    letter-spacing: 0.025em;
    text-transform: uppercase;
  }

  .hero-panel {
    width: 58%;
    border-left: 1px solid var(--color-grey-200);
  }

  /* Responsive - Tablets verticales */
  @media (min-width: 769px) and (max-width: 1024px) {
    .login-panel {
      width: 60%;
      padding: var(--space-12);
    }

    .hero-panel {
      width: 40%;
    }
  }

  /* Responsive - MÃ³viles */
  @media (max-width: 768px) {
    .login-container {
      flex-direction: column;
    }

    .login-panel {
      width: 100%;
      min-height: 100vh;
      padding: var(--space-6);
    }

    .hero-panel {
      display: none;
    }
  }

  /* Estilos globales para hacer responsive el formulario */
  :global(.login-content form > div:has(label:has(input[type="checkbox"]))) {
    flex-direction: column;
    align-items: flex-start !important;
    gap: var(--space-3);
  }

  @media (min-width: 769px) {
    :global(.login-content form > div:has(label:has(input[type="checkbox"]))) {
      flex-direction: row;
      justify-content: space-between;
      align-items: center !important;
    }
  }
</style>
