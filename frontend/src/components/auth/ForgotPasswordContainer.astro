---
import { Image } from 'astro:assets'
import ForgotPasswordForm from './ForgotPasswordForm'
import LoginHero from './LoginHero.astro'
import esTranslations from '@/i18n/locales/es.json'
import enTranslations from '@/i18n/locales/en.json'
import logoCip from '@/assets/images/logo-cip.svg'

interface Props {
  lang?: 'es' | 'en'
}

const { lang = 'es' } = Astro.props

const translations = lang === 'en' ? enTranslations : esTranslations
const brandCouncil = translations.login.brand.council
const brandRegion = translations.login.brand.region
---

<div class="login-container">
  <div class="login-panel">
    <div class="login-content">
      <div class="login-brand">
        <Image src={logoCip} alt="Logo CIP" class="brand-logo" width={48} height={48} loading="eager" />
        <span class="brand-text">{brandCouncil}<br/>{brandRegion}</span>
      </div>
      <ForgotPasswordForm client:only="react" />
    </div>
  </div>

  <div class="hero-panel">
    <LoginHero />
  </div>
</div>

<style>
  .login-container {
    display: flex;
    min-height: 100vh;
    width: 100%;
  }

  .login-panel {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42%;
    padding: var(--space-16);
    background-color: var(--color-bg-form);
  }

  .login-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-10);
    width: 100%;
    max-width: 360px;
  }

  .login-brand {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.75rem;
  }

  .brand-logo {
    width: 48px;
    height: 48px;
    object-fit: contain;
  }

  .brand-text {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-grey-700);
    line-height: 1.3;
    letter-spacing: 0.025em;
    text-transform: uppercase;
  }

  .hero-panel {
    width: 58%;
    border-left: 1px solid var(--color-grey-200);
  }

  @media (min-width: 768px) and (max-width: 1024px) {
    .login-panel {
      width: 60%;
      padding: var(--space-12);
    }

    .hero-panel {
      width: 40%;
    }
  }

  @media (max-width: 768px) {
    .login-container {
      flex-direction: column;
    }

    .login-panel {
      width: 100%;
      min-height: 100vh;
      padding: var(--space-6);
    }

    .hero-panel {
      display: none;
    }
  }
</style>
